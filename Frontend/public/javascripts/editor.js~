(function() {
//Some private vars
var Dom = YAHOO.util.Dom,
    Event = YAHOO.util.Event;

YAHOO.gutter = function() {
    return {
        //The current status of the gutter (true is open)
        status: false,
          //Placeholder for the Overlay control
          gutter: null,
          /*
          * This method will create the Overlay and
          * attach some animations to the show and hide events
          */
          createGutter: function() {
              //Creating the Overlay
              this.gutter = new YAHOO.widget.Overlay('gutter1', {
                  height: '425px',
                  width: '300px',
                  //Setting it the context of the Editor's container
                  context: [
                      myEditor.get('element'),
                      'tl',
                      'tr'
                  ],
                  //Set the position
                  position: 'absolute',
                  //Hide by default
                  visible: false
              });
              /*
              * The hideEvent will control the status of the toolbar button as well
              * as fire the animation off to close the gutter
              */
              this.gutter.hideEvent.subscribe(function() {
                  //Deselect the flickr button in the toolbar
                  myEditor.toolbar.deselectButton('flickr');
                  Dom.setStyle('gutter1', 'visibility', 'visible');
                  var anim = new YAHOO.util.Anim('gutter1', {
                      width: {
                          from: 300,
                          to: 0
                      },
                      opacity: {
                          from: 1,
                          to: 0
                      }
                  }, 1);
                  //When the animation is done, hide the element.
                  anim.onComplete.subscribe(function() {
                      Dom.setStyle('gutter1', 'visibility', 'hidden');
                  });
                  //Animate it
                  anim.animate();
              }, this, true);
              /*
              * The showEvent will control the status of the toolbar button as well
              * as fire the animation off to open the gutter
              */
              this.gutter.showEvent.subscribe(function() {
                  //Select the flickr button in the toolbar
                  myEditor.toolbar.selectButton('flickr');
                  //Set the context of the panel (in case it was lost in the animation)
                  this.gutter.cfg.setProperty('context',[
                      myEditor.get('element'),
                      'tl',
                      'tr'
                  ]);
                  //Set the width to 0 pixels.
                  Dom.setStyle(this.gutter.element, 'width', '0px');
                  var anim = new YAHOO.util.Anim('gutter1', {
                      width: {
                          from: 0,
                          to: 300
                      },
                      opacity: {
                          from: 0,
                          to: 1
                      }
                  }, 1);
                  //Animate it
                  anim.animate();
              }, this, true);
              var warn = '';
              //Check if we are using Safari or Opera, if we are show the warning that you can't drag and drop images
              if (myEditor.browser.webkit || myEditor.browser.opera) {
                  warn = myEditor.STR_IMAGE_COPY;
              }
              //Set the body of the gutter to hold the HTML needed to render the autocomplete
              this.gutter.setBody('<h2>Flickr Image Search</h2><label for="flikr_search">Tag:</label>' +
                  '<input type="text" value="" id="flickr_search"><div id="flickr_results">' +
                  '<p>Enter flickr tags into the box above, separated by commas. Be patient, ' +
                  'this example may take a few seconds to get the images.<p></div>' + warn);
              this.gutter.render(document.body);
          },
          /*
          * Open the gutter using Overlay's show method
          */
          open: function() {
              Dom.get('flickr_search').value = '';
              this.gutter.show();
              this.status = true;
          },
          /*
          * Close the gutter using Overlay's close method
          */
          close: function() {
              this.gutter.hide();
              this.status = false;
          },
          /*
          * Check the state of the gutter and close it if it's open
          * or open it if it's closed.
          */
          toggle: function() {
              if (this.status) {
                  this.close();
              } else {
                  this.open();
              }
          }
      }
  }

})();
jQuery(function($){

  YUI().use('node', 'event', function(Y){
   // YAHOO = Y.YUI3;
   // console.log(YAHOO);

  	//The Editor config
  var myConfig = {
      height: '300px',
      width: '600px',
      animate: true,
      dompath: true,
      focusAtStart: true
  };

  	//Now let's load the Editor.
  	var myEditor = new YAHOO.widget.Editor('editor', myConfig);
    myEditor.render();
  });



});

